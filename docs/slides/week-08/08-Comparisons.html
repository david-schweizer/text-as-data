<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="David Schweizer">
<meta name="dcterms.date" content="2025-04-01">

<title>Text-as-Data - Course Website - Topic Models</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../css/custom.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Topic Models</li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../../index.html" class="sidebar-logo-link">
      <img src="../../images/hex_sticker.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main">
    <a href="https://ilias.uni-mannheim.de/goto.php?target=crs_1589237&amp;client_id=ILIAS" title="Ilias" class="quarto-navigation-tool px-1" aria-label="Ilias"><i class="bi bi-bank"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../material.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Schedule, slides &amp; materials</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../reading.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Text-as-Data literature</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#todays-session" id="toc-todays-session" class="nav-link active" data-scroll-target="#todays-session">Today’s session</a></li>
  <li><a href="#topic-models" id="toc-topic-models" class="nav-link" data-scroll-target="#topic-models">Topic models</a></li>
  <li><a href="#motivating-example" id="toc-motivating-example" class="nav-link" data-scroll-target="#motivating-example">Motivating example</a></li>
  <li><a href="#topic-models-1" id="toc-topic-models-1" class="nav-link" data-scroll-target="#topic-models-1">Topic models</a></li>
  <li><a href="#what-is-a-topic" id="toc-what-is-a-topic" class="nav-link" data-scroll-target="#what-is-a-topic">What is a topic?</a></li>
  <li><a href="#what-is-a-document" id="toc-what-is-a-document" class="nav-link" data-scroll-target="#what-is-a-document">What is a “document”?</a></li>
  <li><a href="#topic-models-2" id="toc-topic-models-2" class="nav-link" data-scroll-target="#topic-models-2">Topic Models</a></li>
  <li><a href="#lda-latent-dirichlet-allocation" id="toc-lda-latent-dirichlet-allocation" class="nav-link" data-scroll-target="#lda-latent-dirichlet-allocation">LDA (Latent Dirichlet Allocation)</a>
  <ul class="collapse">
  <li><a href="#lda" id="toc-lda" class="nav-link" data-scroll-target="#lda">LDA</a></li>
  <li><a href="#lda-1" id="toc-lda-1" class="nav-link" data-scroll-target="#lda-1">LDA</a></li>
  <li><a href="#lda-2" id="toc-lda-2" class="nav-link" data-scroll-target="#lda-2">LDA</a></li>
  <li><a href="#lda-3" id="toc-lda-3" class="nav-link" data-scroll-target="#lda-3">LDA</a></li>
  <li><a href="#why-does-lda-work" id="toc-why-does-lda-work" class="nav-link" data-scroll-target="#why-does-lda-work">Why does LDA work?</a></li>
  <li><a href="#lda-example" id="toc-lda-example" class="nav-link" data-scroll-target="#lda-example">LDA example</a></li>
  <li><a href="#lda-example-1" id="toc-lda-example-1" class="nav-link" data-scroll-target="#lda-example-1">LDA example</a></li>
  <li><a href="#lda-example-2" id="toc-lda-example-2" class="nav-link" data-scroll-target="#lda-example-2">LDA example</a></li>
  <li><a href="#lda-example-3" id="toc-lda-example-3" class="nav-link" data-scroll-target="#lda-example-3">LDA example</a></li>
  <li><a href="#lda-example-4" id="toc-lda-example-4" class="nav-link" data-scroll-target="#lda-example-4">LDA example</a></li>
  <li><a href="#lda-example-5" id="toc-lda-example-5" class="nav-link" data-scroll-target="#lda-example-5">LDA example</a></li>
  <li><a href="#lda-example-6" id="toc-lda-example-6" class="nav-link" data-scroll-target="#lda-example-6">LDA example</a></li>
  <li><a href="#lda-example-7" id="toc-lda-example-7" class="nav-link" data-scroll-target="#lda-example-7">LDA example</a></li>
  <li><a href="#differences-topic-8-and-topic-9" id="toc-differences-topic-8-and-topic-9" class="nav-link" data-scroll-target="#differences-topic-8-and-topic-9">Differences topic 8 and topic 9</a></li>
  <li><a href="#diffences-topic-8-and-topic-9" id="toc-diffences-topic-8-and-topic-9" class="nav-link" data-scroll-target="#diffences-topic-8-and-topic-9">Diffences topic 8 and topic 9</a></li>
  <li><a href="#document-topic-probabilities" id="toc-document-topic-probabilities" class="nav-link" data-scroll-target="#document-topic-probabilities">Document-topic probabilities</a></li>
  <li><a href="#document-topic-probabilities-1" id="toc-document-topic-probabilities-1" class="nav-link" data-scroll-target="#document-topic-probabilities-1">Document-topic probabilities</a></li>
  <li><a href="#inspect" id="toc-inspect" class="nav-link" data-scroll-target="#inspect">Inspect</a></li>
  <li><a href="#inspect-1" id="toc-inspect-1" class="nav-link" data-scroll-target="#inspect-1">Inspect</a></li>
  <li><a href="#advantages-and-disadvantages-of-lda" id="toc-advantages-and-disadvantages-of-lda" class="nav-link" data-scroll-target="#advantages-and-disadvantages-of-lda">Advantages and Disadvantages of LDA</a></li>
  </ul></li>
  <li><a href="#structural-topic-model-stm" id="toc-structural-topic-model-stm" class="nav-link" data-scroll-target="#structural-topic-model-stm">Structural Topic Model (STM)</a>
  <ul class="collapse">
  <li><a href="#lda-extensions" id="toc-lda-extensions" class="nav-link" data-scroll-target="#lda-extensions">LDA Extensions</a></li>
  </ul></li>
  <li><a href="#structural-topic-model" id="toc-structural-topic-model" class="nav-link" data-scroll-target="#structural-topic-model">Structural Topic Model</a>
  <ul class="collapse">
  <li><a href="#structural-topic-model-1" id="toc-structural-topic-model-1" class="nav-link" data-scroll-target="#structural-topic-model-1">Structural Topic Model</a></li>
  <li><a href="#structural-topic-model-application" id="toc-structural-topic-model-application" class="nav-link" data-scroll-target="#structural-topic-model-application">Structural Topic Model Application</a></li>
  <li><a href="#structural-topic-model-application-1" id="toc-structural-topic-model-application-1" class="nav-link" data-scroll-target="#structural-topic-model-application-1">Structural Topic Model Application</a></li>
  <li><a href="#estimate-stm" id="toc-estimate-stm" class="nav-link" data-scroll-target="#estimate-stm">Estimate STM</a></li>
  <li><a href="#plot" id="toc-plot" class="nav-link" data-scroll-target="#plot">Plot</a></li>
  <li><a href="#plot-1" id="toc-plot-1" class="nav-link" data-scroll-target="#plot-1">Plot</a></li>
  <li><a href="#plot-2" id="toc-plot-2" class="nav-link" data-scroll-target="#plot-2">Plot</a></li>
  <li><a href="#plot-3" id="toc-plot-3" class="nav-link" data-scroll-target="#plot-3">Plot</a></li>
  <li><a href="#plot-4" id="toc-plot-4" class="nav-link" data-scroll-target="#plot-4">Plot</a></li>
  </ul></li>
  <li><a href="#validating-topic-models" id="toc-validating-topic-models" class="nav-link" data-scroll-target="#validating-topic-models">Validating Topic Models</a>
  <ul class="collapse">
  <li><a href="#validating-topic-models-1" id="toc-validating-topic-models-1" class="nav-link" data-scroll-target="#validating-topic-models-1">Validating Topic Models</a></li>
  <li><a href="#validating-topic-models-2" id="toc-validating-topic-models-2" class="nav-link" data-scroll-target="#validating-topic-models-2">Validating Topic Models</a></li>
  <li><a href="#quantitative-evaluation-of-stm" id="toc-quantitative-evaluation-of-stm" class="nav-link" data-scroll-target="#quantitative-evaluation-of-stm">Quantitative Evaluation of STM</a></li>
  <li><a href="#quantitative-evaluation-of-stm-1" id="toc-quantitative-evaluation-of-stm-1" class="nav-link" data-scroll-target="#quantitative-evaluation-of-stm-1">Quantitative Evaluation of STM</a></li>
  <li><a href="#semantic-validity-chang-et-al.-2009" id="toc-semantic-validity-chang-et-al.-2009" class="nav-link" data-scroll-target="#semantic-validity-chang-et-al.-2009">Semantic validity (Chang et al.&nbsp;2009)</a></li>
  <li><a href="#validating-topic-models-substantive-approaches" id="toc-validating-topic-models-substantive-approaches" class="nav-link" data-scroll-target="#validating-topic-models-substantive-approaches">Validating Topic Models – Substantive approaches</a></li>
  </ul></li>
  <li><a href="#coding" id="toc-coding" class="nav-link" data-scroll-target="#coding">Coding</a>
  <ul class="collapse">
  <li><a href="#coding-1" id="toc-coding-1" class="nav-link" data-scroll-target="#coding-1">Coding</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="08-Comparisons.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Topic Models</h1>
<p class="subtitle lead">Week 08</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">David Schweizer </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Mannheim
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 1, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="todays-session" class="level2">
<h2 class="anchored" data-anchor-id="todays-session">Today’s session</h2>
<ul>
<li><p>Input: Topic models</p></li>
<li><p>Coding: Replication &amp; Comparison</p></li>
</ul>
</section>
<section id="topic-models" class="level2">
<h2 class="anchored" data-anchor-id="topic-models">Topic models</h2>
<ul>
<li>Allow us to cluster similar documents in a corpus together.</li>
<li>Algorithm to find most important ‘topics’ in an unstructured corpus through analyzing co-occurence of words</li>
</ul>
<p><strong>Typical use:</strong></p>
<ul>
<li><p>to get a first impression of data, e.g., large amounts of text data</p></li>
<li><p>to study the trajectory of large topics in diverse corpora in scientific journals, twitter data, laws, …</p></li>
<li><p>to study different frames of the same debate: different aspects highlighted, different words used, …</p></li>
</ul>
</section>
<section id="motivating-example" class="level2">
<h2 class="anchored" data-anchor-id="motivating-example">Motivating example</h2>
<ul>
<li>Data: German Bundestag - <a href="https://www.bundestag.de/services/glossar/glossar/F/fragestunde-245420">“Fragestunden”</a> of the 19th legislative period.</li>
<li>Further subsetted to speeches delivered by the opposition parties.</li>
</ul>
<p><a href="https://htmlpreview.github.io/?https://github.com/david-schweizer/LDAvis/blob/main/LDAvis/index.html">Results from a 15-Topic model</a></p>
</section>
<section id="topic-models-1" class="level2">
<h2 class="anchored" data-anchor-id="topic-models-1">Topic models</h2>
<ul>
<li><p>Topic models offer an automated procedure for discovering the main “themes” in an unstructured corpus</p></li>
<li><p>They require no prior information, training set, or labelling of texts before estimation</p></li>
<li><p>They allow us to automatically organise, understand, and summarise large archives of text data.</p></li>
<li><p>Latent Dirichlet Allocation (LDA) is the most common approach (Blei et al., 2003), and one that underpins more complex models</p></li>
<li><p>Topic models are an example of <em>mixture</em> models:</p>
<ul>
<li><p>Documents can contain multiple topics</p></li>
<li><p>Words can belong to multiple topics</p></li>
</ul></li>
</ul>
</section>
<section id="what-is-a-topic" class="level2">
<h2 class="anchored" data-anchor-id="what-is-a-topic">What is a topic?</h2>
<p>A “topic” is a probability distribution over a fixed word vocabulary.</p>
<ul>
<li><p>Consider a vocabulary: “diplomacy”, “treaty”, “conflict”, “election”, “policy”, “coalition”</p></li>
<li><p>When speaking about international relations, you will:</p>
<ul>
<li><p><strong>Frequently use</strong> the words “diplomacy”, “treaty”, “conflict”</p></li>
<li><p><strong>Infrequently use</strong> the words “election”, “policy”, and “coalition”</p></li>
</ul></li>
<li><p>When speaking about domestic politics, you will:</p>
<ul>
<li><strong>Frequently use</strong> the words “diplomacy”, “treaty”, “conflict”</li>
<li><strong>Infrequently use</strong> the words “diplomacy”, “treaty”, and “alliance”</li>
</ul></li>
</ul>
</section>
<section id="what-is-a-document" class="level2">
<h2 class="anchored" data-anchor-id="what-is-a-document">What is a “document”?</h2>
<ul>
<li><p>In a topic model, each document is described as being composed of a <strong>mixture</strong> of corpus-wide topics</p></li>
<li><p>For each document, we find the topic proportions that maximize the probability that we would observe the words in that particular document</p></li>
</ul>
</section>
<section id="topic-models-2" class="level2">
<h2 class="anchored" data-anchor-id="topic-models-2">Topic Models</h2>
<p>A topic model simultaneously estimates two sets of probabilities</p>
<ol type="1">
<li><p>The probability of observing each word for each topic</p></li>
<li><p>The probability of observing each topic in each document</p></li>
</ol>
<p>These quantities can then be used to organise documents by topic, assess how topics vary across documents, etc.</p>
</section>
<section id="lda-latent-dirichlet-allocation" class="level1">
<h1>LDA (Latent Dirichlet Allocation)</h1>
<section id="lda" class="level2">
<h2 class="anchored" data-anchor-id="lda">LDA</h2>
<p><img src="lda.png" class="img-fluid"></p>
<ul>
<li><p>The researcher picks a number of topics, K.</p></li>
<li><p>Each <em>topic</em> (k) is a distribution over words</p></li>
<li><p>Each <em>document</em> (d) is a mixture of corpus-wide topics</p></li>
<li><p>Each <em>word</em> (w) is drawn from one of those topics</p></li>
</ul>
</section>
<section id="lda-1" class="level2">
<h2 class="anchored" data-anchor-id="lda-1">LDA</h2>
<p><img src="lda_2.png" class="img-fluid"></p>
<ul>
<li><p>In reality, we only observe the documents</p></li>
<li><p>The other structure are <strong>hidden variables</strong></p></li>
<li><p>Our goal is to <strong>infer</strong> the hidden variables</p></li>
</ul>
</section>
<section id="lda-2" class="level2">
<h2 class="anchored" data-anchor-id="lda-2">LDA</h2>
<p><img src="lda_2.png" class="img-fluid"></p>
<ul>
<li>Topic modelling allows us to extrapolate backwards from a collection of documents to infer the “topics” that could have generated them.</li>
</ul>
</section>
<section id="lda-3" class="level2">
<h2 class="anchored" data-anchor-id="lda-3">LDA</h2>
<ul>
<li><p>The LDA model is a <strong>Bayesian mixture model</strong> for discrete data which describes how the documents in a dataset were created</p></li>
<li><p>The number of topics, K, is selected by the researcher</p></li>
<li><p>Each of the K <em>topics</em> is a probability distribution over a fixed vocabulary of N words</p>
<ul>
<li>Modeled as a Dirichlet distribution</li>
</ul></li>
<li><p>Each of the D <em>documents</em> is a probability distribution over the K topics</p>
<ul>
<li>Modeled as a Dirichlet distribution</li>
</ul></li>
<li><p>Each word in each document is drawn from the topic-specific probability distribution over words</p>
<ul>
<li>Modeled as a multinomial distribution</li>
</ul></li>
</ul>
</section>
<section id="why-does-lda-work" class="level2">
<h2 class="anchored" data-anchor-id="why-does-lda-work">Why does LDA work?</h2>
<ul>
<li><p>LDA trades off two goals.</p>
<ol type="1">
<li><p>For each document, allocate its words to as few topics as possible (α)</p></li>
<li><p>For each topic, assign high probability to as few terms as possible (η)</p></li>
</ol></li>
<li><p>These goals are at odds.</p>
<ol type="1">
<li><p>Putting a document in a single topic makes (2) hard: All of its words must have probability under that topic.</p></li>
<li><p>Putting very few words in each topic makes (1) hard: To cover a document’s words, it must assign many topics to it.</p></li>
</ol></li>
<li><p>Trading off these goals finds groups of <strong>tightly co-occurring words</strong></p></li>
</ul>
</section>
<section id="lda-example" class="level2">
<h2 class="anchored" data-anchor-id="lda-example">LDA example</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Paket 'tidyverse' wurde unter R Version 4.3.3 erstellt</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Paket 'ggplot2' wurde unter R Version 4.3.3 erstellt</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Paket 'quanteda' wurde unter R Version 4.3.3 erstellt</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in .recacheSubclasses(def@className, def, env): Nicht definierte
Subklasse "ndiMatrix" von Klasse "replValueSp"; Definition nicht aktualisiert</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Package version: 4.2.0
Unicode version: 15.1
ICU version: 74.1
Parallel computing: 4 of 4 threads used.
See https://quanteda.io for tutorials and examples.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(topicmodels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Paket 'topicmodels' wurde unter R Version 4.3.3 erstellt</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Paket 'tidytext' wurde unter R Version 4.3.3 erstellt</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load data</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"Corpus_speeches_germany_19.rda"</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Get "Fragestunden" for opposition paries</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> Corpus_speeches_germany_19 <span class="sc">%&gt;%</span> </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Fragestunde_logical =</span> <span class="fu">str_detect</span>(agenda, <span class="st">"Fragestunde"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Fragestunde_logical <span class="sc">==</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(party <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"BÜNDNIS 90/DIE GRÜNEN"</span>, <span class="st">"AfD"</span>, <span class="st">"DIE LINKE"</span>, <span class="st">"FDP"</span>))</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   2498 obs. of  13 variables:
 $ speaker            : chr  "André Hahn" "André Hahn" "Konstantin von Notz" "André Hahn" ...
 $ text               : chr  "Vielen Dank, Herr Präsident.&nbsp;– Ich nehme Bezug auf Medienberichte, Herr Staatssekretär. Der Bericht ist leider "| __truncated__ "Die Frage nach den rechtlichen Möglichkeiten des Unabhängigen Gremiums, seinen Anspruch durchzusetzen, ist nich"| __truncated__ "GRÜ- Herr Präsident, vielen Dank.&nbsp;– Herr Staatssekretär, empfinden Sie, ohne dass wir hier jetzt über geheime D"| __truncated__ "Vielen Dank, Herr Präsident.&nbsp;– Herr Staatssekretär, ich habe eine ganz einfache Frage: Haben Sie dem Unabhängig"| __truncated__ ...
 $ party              : chr  "DIE LINKE" "DIE LINKE" "BÜNDNIS 90/DIE GRÜNEN" "DIE LINKE" ...
 $ date               : Date, format: "2017-12-13" "2017-12-13" ...
 $ agenda             : chr  "Tagesordnungspunkt 11:  Fragestunde  Drucksache 19/188/19 " "Tagesordnungspunkt 11:  Fragestunde  Drucksache 19/188/19 " "Tagesordnungspunkt 11:  Fragestunde  Drucksache 19/188/19 " "Tagesordnungspunkt 11:  Fragestunde  Drucksache 19/188/19 " ...
 $ speechnumber       : int  76 79 82 86 88 90 93 98 103 106 ...
 $ procedure_ID       : chr  "" "" "" "" ...
 $ partyfacts_ID      : num  1545 1545 1816 1545 1545 ...
 $ period             : chr  "19" "19" "19" "19" ...
 $ chair              : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ minister           : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ chancelor          : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ Fragestunde_logical: logi  TRUE TRUE TRUE TRUE TRUE TRUE ...</code></pre>
</div>
</div>
</section>
<section id="lda-example-1" class="level2">
<h2 class="anchored" data-anchor-id="lda-example-1">LDA example</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Document feature matrix</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>dfm <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">corpus</span>(<span class="at">text_field =</span> <span class="st">"text"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens</span>(<span class="at">remove_punct =</span> <span class="cn">TRUE</span>,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">remove_numbers =</span> <span class="cn">TRUE</span>,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">remove_symbols =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_tolower</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(<span class="fu">c</span>(<span class="fu">stopwords</span>(<span class="st">"de"</span>), <span class="st">"dass"</span>, </span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"herr"</span>, <span class="st">"frau"</span>, <span class="st">"geehrte"</span>, <span class="st">"damen"</span>, <span class="st">"herren"</span>, <span class="st">"kollege"</span>, <span class="st">"kollegen"</span>, <span class="st">"kollegin"</span>, <span class="st">"kolleginnen"</span>, <span class="st">"minister"</span>,</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"spd"</span>, <span class="st">"fdp"</span>, <span class="st">"cdu"</span>, <span class="st">"csu"</span>, <span class="st">"cdu/csu"</span>, <span class="st">"cducsu"</span>, <span class="st">"union"</span>, <span class="st">"afd"</span>, <span class="st">"die grünen"</span>,  <span class="st">"bündnis90"</span>, <span class="st">"linke"</span>, <span class="st">"fraktion"</span>,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"alternative für deutschland"</span>, <span class="st">"christdemokraten"</span>, <span class="st">"sozialdemokraten"</span>,</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"präsident"</span>, <span class="st">"präsidentin"</span>, <span class="st">"staatsekretär"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_wordstem</span>(<span class="at">language =</span> <span class="st">"german"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># keep the top 20% of the most frequent features (min_termfreq = 0.8) </span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># in less than 10% of all documents (max_docfreq = 0.1) </span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># to focus on common but distinguishing features.</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="fl">0.8</span>, <span class="at">termfreq_type =</span> <span class="st">"quantile"</span>,</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>           <span class="at">max_docfreq =</span> <span class="fl">0.1</span>, <span class="at">docfreq_type =</span> <span class="st">"prop"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="lda-example-2" class="level2">
<h2 class="anchored" data-anchor-id="lda-example-2">LDA example</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert for usage in 'topicmodels' package</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>dtm <span class="ot">&lt;-</span> dfm <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">convert</span>(<span class="at">to =</span> <span class="st">'topicmodels'</span>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>dtm</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;&lt;DocumentTermMatrix (documents: 2469, terms: 3230)&gt;&gt;
Non-/sparse entries: 62328/7912542
Sparsity           : 99%
Maximal term length: 30
Weighting          : term frequency (tf)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the LDA with 15 topics and set seed for reproducibility</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>ldaOut <span class="ot">&lt;-</span> <span class="fu">LDA</span>(dtm, </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">k =</span> <span class="dv">15</span>, </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">control =</span> <span class="fu">list</span>(<span class="at">seed =</span> <span class="dv">1234</span>))</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(ldaOut, <span class="at">file =</span> <span class="st">"ldaOut.Rda"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="lda-example-3" class="level2">
<h2 class="anchored" data-anchor-id="lda-example-3">LDA example</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load data</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>topic_word_probabilities <span class="ot">&lt;-</span> <span class="fu">tidy</span>(ldaOut, <span class="at">matrix =</span> <span class="st">"beta"</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for highest word probabilities per topic</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>terms <span class="ot">&lt;-</span> topic_word_probabilities  <span class="sc">%&gt;%</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(topic) <span class="sc">%&gt;%</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(beta, <span class="at">n =</span> <span class="dv">7</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(topic, <span class="sc">-</span>beta)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>terms <span class="sc">%&gt;%</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">term =</span> <span class="fu">reorder_within</span>(term, beta, topic)) <span class="sc">%&gt;%</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(beta, term, <span class="at">fill =</span> <span class="fu">factor</span>(topic))) <span class="sc">+</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> topic, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_reordered</span>() <span class="sc">+</span> </span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="lda-example-4" class="level2">
<h2 class="anchored" data-anchor-id="lda-example-4">LDA example</h2>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="08-Comparisons_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="lda-example-5" class="level2">
<h2 class="anchored" data-anchor-id="lda-example-5">LDA example</h2>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="08-Comparisons_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="lda-example-6" class="level2">
<h2 class="anchored" data-anchor-id="lda-example-6">LDA example</h2>
<p>Now let us make use of the following score to visualise the posterior topics:</p>
<p><span class="math inline">\(\text{term-score}_{k,v} = \hat{\beta}_{k,v} \log \left( \frac{\hat{\beta_{k,v}}}{\left( \prod_{j=1}^{K} \hat{\beta}_{k,v} \right)^{\frac{1}{K}}} \right)\)</span></p>
<ul>
<li><p>The first term <span class="math inline">\(\hat{\beta}_{k,v}\)</span> is the probability of term <span class="math inline">\(v\)</span> in topic <span class="math inline">\(k\)</span> and is akin to the term frequency</p></li>
<li><p>The second term down-weights terms that have high probability under all topics</p></li>
</ul>
</section>
<section id="lda-example-7" class="level2">
<h2 class="anchored" data-anchor-id="lda-example-7">LDA example</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate term scores</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>top_terms <span class="ot">&lt;-</span> topic_word_probabilities <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(term) <span class="sc">%&gt;%</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">beta_k =</span> <span class="fu">prod</span>(beta)<span class="sc">^</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">15</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Compute the term score with adjusted beta_k to prevent issues with log(0)</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">term_score =</span> beta <span class="sc">*</span> <span class="fu">log</span>((beta) <span class="sc">/</span> (beta_k <span class="sc">+</span> <span class="fl">1e-10</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(topic) <span class="sc">%&gt;%</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(term_score, <span class="at">n =</span> <span class="dv">10</span>)  <span class="co"># Get top 15 terms for each topic</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the terms with the largest scores per topic</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>top_terms<span class="sc">$</span>term[top_terms<span class="sc">$</span>topic<span class="sc">==</span><span class="dv">8</span>] </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "verstand"         "vorschlag"        "ziel"             "kommun"          
 [5] "position"         "staatssekretarin" "richtig"          "bitt"            
 [9] "erwart"           "end"             </code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>top_terms<span class="sc">$</span>term[top_terms<span class="sc">$</span>topic<span class="sc">==</span><span class="dv">9</span>] </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "mensch"  "prozent" "kind"    "arbeit"  "alt"     "zahl"    "sozial" 
 [8] "uns"     "leut"    "muss"   </code></pre>
</div>
</div>
</section>
<section id="differences-topic-8-and-topic-9" class="level2">
<h2 class="anchored" data-anchor-id="differences-topic-8-and-topic-9">Differences topic 8 and topic 9</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>beta_diff <span class="ot">&lt;-</span> topic_word_probabilities <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">topic =</span> <span class="fu">paste0</span>(<span class="st">"topic"</span>, topic)) <span class="sc">%&gt;%</span> <span class="co"># naming</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> topic, <span class="at">values_from =</span> beta) <span class="sc">%&gt;%</span> <span class="co"># to wide</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(topic8 <span class="sc">&gt;</span> .<span class="dv">001</span> <span class="sc">|</span> topic9 <span class="sc">&gt;</span> .<span class="dv">001</span>) <span class="sc">%&gt;%</span> <span class="co"># filter per-topic-per-word probabilities</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">log_ratio =</span> <span class="fu">log2</span>(topic9 <span class="sc">/</span> topic8)) <span class="sc">%&gt;%</span> <span class="co"># calculate log ratio: log ratio is useful because it makes the difference symmetrical</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(term, log_ratio) </span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the largest and smallest differences</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>beta_diff <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  beta_diff <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(<span class="at">order_by =</span> log_ratio, <span class="at">n =</span> <span class="dv">10</span>),  <span class="co"># Top 10</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  beta_diff <span class="sc">%&gt;%</span> <span class="fu">slice_min</span>(<span class="at">order_by =</span> log_ratio, <span class="at">n =</span> <span class="dv">10</span>)   <span class="co"># Bottom 10</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot these differences</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(beta_diff, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(term, log_ratio), <span class="at">y =</span> log_ratio)) <span class="sc">+</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"gray30"</span>) <span class="sc">+</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span>  <span class="co"># Horizontal bars</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Log2 ratio of beta in topic 9 / topic 8"</span>) <span class="sc">+</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="diffences-topic-8-and-topic-9" class="level2">
<h2 class="anchored" data-anchor-id="diffences-topic-8-and-topic-9">Diffences topic 8 and topic 9</h2>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 row containing missing values or values outside the scale range
(`geom_bar()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="08-Comparisons_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="document-topic-probabilities" class="level2">
<h2 class="anchored" data-anchor-id="document-topic-probabilities">Document-topic probabilities</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># per-document-per-topic probabilities</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>doc_topics <span class="ot">&lt;-</span> <span class="fu">tidy</span>(ldaOut, <span class="at">matrix =</span> <span class="st">"gamma"</span>) </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># per-document-per-topic probabilities</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>doc_topics <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(document) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 3
   document topic  gamma
   &lt;chr&gt;    &lt;int&gt;  &lt;dbl&gt;
 1 103632       1 0.0114
 2 103632       2 0.104 
 3 103632       3 0.0114
 4 103632       4 0.0114
 5 103632       5 0.0114
 6 103632       6 0.0114
 7 103632       7 0.0114
 8 103632       8 0.0114
 9 103632       9 0.0114
10 103632      10 0.0114
11 103632      11 0.272 
12 103632      12 0.0114
13 103632      13 0.0114
14 103632      14 0.0114
15 103632      15 0.488 </code></pre>
</div>
</div>
</section>
<section id="document-topic-probabilities-1" class="level2">
<h2 class="anchored" data-anchor-id="document-topic-probabilities-1">Document-topic probabilities</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># per-document-per-topic probabilities</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>doc_topics <span class="ot">&lt;-</span> <span class="fu">tidy</span>(ldaOut, <span class="at">matrix =</span> <span class="st">"gamma"</span>) </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># per-document-per-topic probabilities sum up to 1</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>doc_topics <span class="sc">%&gt;%</span> </span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(document) <span class="sc">%&gt;%</span> </span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">sum =</span> <span class="fu">sum</span>(gamma)) <span class="sc">%&gt;%</span> </span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  document   sum
  &lt;chr&gt;    &lt;dbl&gt;
1 103632       1
2 103672       1
3 103702       1
4 103742       1
5 103792       1
6 103832       1</code></pre>
</div>
</div>
</section>
<section id="inspect" class="level2">
<h2 class="anchored" data-anchor-id="inspect">Inspect</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Highest probabilities, then focus topic 9</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>doc_topics <span class="sc">%&gt;%</span> </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(topic) <span class="sc">%&gt;%</span> </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(gamma, <span class="at">n =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 3
   document topic gamma
   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt;
 1 69097        1 0.985
 2 321962       2 0.977
 3 631461       3 0.877
 4 564851       4 0.936
 5 232332       5 0.967
 6 380202       6 0.965
 7 232802       7 0.994
 8 500422       8 0.968
 9 399962       9 0.994
10 490132      10 0.967
11 153082      11 0.925
12 658611      12 0.995
13 142952      13 0.977
14 371262      14 0.961
15 554391      15 0.977</code></pre>
</div>
</div>
</section>
<section id="inspect-1" class="level2">
<h2 class="anchored" data-anchor-id="inspect-1">Inspect</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>document <span class="ot">&lt;-</span> <span class="fu">rownames</span>(data) </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co"># check the corresponding speech</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(document <span class="sc">==</span> <span class="dv">399962</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(text) <span class="sc">%&gt;%</span> </span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.vector</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$text
[1] "Sehr geehrter Herr Präsident! Werte Kolleginnen und Kollegen! Sehr geehrte Frau Lehmann, ehemalige Kreistagskollegin, herzlichen Glückwunsch zum Einzug in den Bundestag und auf eine gute gemeinsame Zusammenarbeit für den Heimatwahlkreis!  Ich komme gerade zurück aus Paris.  Es war eine Dienstreise. Ich war bei der Sitzung der Parlamentarischen Versammlung des Europarats. Es ging um Demokratie und Rechtsstaatlichkeit. Ich weiß, da haben gewisse Parteien hier in diesem Haus leider gewisse Berührungsängste.  Ich war der einzige deutsche Abgeordnete dort – leider. Auf jeden Fall: In Paris demonstrieren und streiken die Leute gerade. Sie demonstrieren und streiken gegen genau die Politik, die in Deutschland existiert und die Macron dort einführen will.  Macron will faktisch die deutsche Rente nach Frankreich  kopieren, genauso wie Ursula von der Leyen den Green New Deal von irgendwelchen US-amerikanischen Ökokommunistinnen kopiert und Merkel den Politikstil des Zentralkomitees. Diese Arbeitsattitüde der Großen Koalition bringt niemanden voran.  Die Leute gehen auf die Straße, weil sie sehen: Das bringt uns in Armut. Wenn dieses System kommt, dann bedeutet die Zukunft Armut, und das ist leider die Gegenwart in Deutschland. Insofern danke ich Ihnen von der Linken, dass Sie das Thema heute auf die Tagesordnung gesetzt haben;  denn es ist eine Schande für Deutschland, wenn immer mehr Rentner zur Tafel gehen müssen, um überhaupt überleben zu können.  Das zeigt doch: Es stimmt etwas nicht zwischen Einnahmen und Ausgaben.  Es kommt erstens zu wenig rein, und zweitens steigen die  Ausgaben zu stark. Und das hat natürlich mit dieser makroökonomischen Politik zu tun, die insbesondere von den  regierenden Parteien hier betrieben worden ist und betrieben wird. Ein großes Stichwort heißt „Riester-Dämpfung“. Die Reform, die SPD und Grüne – ich spreche es offen an – damals eingeführt haben: Die Leute werden am Rande alle noch ein bisschen riestern, und dann werden sie letztendlich eine private Vorsorge haben. – Pustekuchen! Ich frage mich schon, wie die Bundesregierung überhaupt  noch die Frechheit besitzen kann, im Rentenversicherungsbericht mit 4 Prozent per annum Verzinsung für die Riester-Rente zu rechnen. Wir wissen alle – das IVFP hat es nachgewiesen –, es kommen zwischen 0 und 2 Prozent Rendite raus, nicht 4 Prozent. Deswegen werden die Leute kaum mehr ausgezahlt bekommen, als sie eingezahlt haben, wenn sie in Rente gehen. Das bedeutet: Dieser private Vorsorgeteil scheitert, die gesetzliche Umlagerente haben Sie im Prinzip nach unten reformiert, auf einen niedrigen Standard reformiert, und dass wir heute Altersarmut zu beklagen haben, ist kein Zufall, sondern das Ergebnis Ihrer Politik. Das haben Sie als Ziel definiert.  Es ist übrigens kein Ausweg, dass die Rentner im Alter einfach weiterarbeiten, Herr Kober. Ich weiß nicht, warum Sie das formulieren. Auch in einem Zeitungsinter-Norbert Kleinwächter view haben Sie das formuliert. Vielleicht betreibt die FDP ja demnächst einen Sarglieferservice für Büros. Ich weiß nicht, was das soll. Menschen haben im Alter ein gutes Auskommen verdient, und dafür müssen wir in der Politik sorgen.  Jetzt kommt die schwere Aufgabe für die Zukunft – viele von Ihnen haben darüber gesprochen –: Wir müssen Löhne anheben, wir müssen für Bildung sorgen usw. Das ist richtig, und das ist wichtig für die nächste Generation.  Aber wir haben schon jetzt ein Altersarmutsproblem bei  den Leuten, die bereits in Rente sind. Und da müssen wir letztendlich mit anderen ökonomischen Mitteln herangehen.  Wir haben zweierlei Lösungskomplexe, die ich Ihnen ganz kurz vorstelle. Das eine ist ganz klar: die Ausgaben zu reduzieren. Wir haben jede Menge Dinge, die die ganz normalen Menschen in unserem Land immer mehr belasten. Ich sage nur: Ökospinnereien aller möglichen Arten, neue Heizungsverpflichtungen, neue Autoverpflichtungen, Erneuerbare-Energien-Gesetz. Das muss weg. Das treibt unseren Strompreis in die Höhe, und diesen Strom zahlen natürlich auch unsere Rentner. Wir sollten die Grundsteuer abschaffen. Wir müssen den Mehrwertsteuersatz senken. Das sind doch alles Dinge, die zu Ausgaben führen. Und vor allem: Wir müssen raus aus diesem Euro; denn der ist die Grundlage der großen Probleme, die wir in Deutschland haben.  Wir haben den Euro mit einer ständigen Geldmengensteigerung. 13 Billionen ist die Geldmenge aktuell. Die EZB druckt jedes Jahr eine halbe Billion nach. Das wird einfach in den Markt gestreut, und zwar nicht an alle, sondern an Investoren. Die investieren wieder in Immobilien, damit werden die Wohnungen teurer, damit werden die Mieten wieder teurer, und diese Mieten müssen natürlich auch unsere Rentner bezahlen. Deswegen sind sie am Ende dann arm. Diese Situation haben wir. Wir haben die Abwertung der Währung, sodass unsere Löhne und unsere Renten tatsächlich immer weniger wert sind.  Das ist natürlich ein Problem, weil das letztendlich unsere Währung billiger macht und Investoren aus dem Ausland anlockt, was dann letztendlich wiederum zu einer Preissteigerung im Sachwertesegment führt.   Und wir haben die Negativzinspolitik, die auch ein  Grund dafür ist, dass Riester nicht funktioniert. Die Leute kriegen keine Zinsen mehr auf ihre Spareinlagen. Die Leute können gar nicht mehr ordentlich fürs Alter vorsorgen. Und am Ende sind sie arm, weil unsere deutschen Rentner im Prinzip für die insolventen Broker aus dem Ausland zahlen. Das ist doch die Wahrheit der Politik, die die Regierung hier an den Tag legt.  Deswegen sagen wir: Runter mit den Ausgaben und raus aus dem Euro.  Das ist die wahre makroökonomische Lösung für das Problem der Altersarmut in Deutschland. Herzlichen Dank."</code></pre>
</div>
</div>
</section>
<section id="advantages-and-disadvantages-of-lda" class="level2">
<h2 class="anchored" data-anchor-id="advantages-and-disadvantages-of-lda">Advantages and Disadvantages of LDA</h2>
<p><strong>Advantages</strong></p>
<ul>
<li><p>Automatically finds substantively interesting collections of words</p></li>
<li><p>Easily scaled to large corpora (millions of documents)</p></li>
<li><p>Requires very little prior work (no manual labelling of texts/dictionary construction etc)</p></li>
</ul>
<p><strong>Disadvantages</strong></p>
<ul>
<li><p>Generated topics may not reflect substantive interest of researcher</p></li>
<li><p>Many estimated topics may be redundant for research question</p></li>
<li><p>Requires extensive post-hoc interpretation of topics</p></li>
<li><p>Sensitivity to number of topics selected (what is the best choice for K?)</p></li>
</ul>
</section>
</section>
<section id="structural-topic-model-stm" class="level1">
<h1>Structural Topic Model (STM)</h1>
<section id="lda-extensions" class="level2">
<h2 class="anchored" data-anchor-id="lda-extensions">LDA Extensions</h2>
<ol type="1">
<li><p><strong>Correlated Topic Model (CTM)</strong></p>
<ul>
<li><p>LDA assumes that topics are uncorrelated across the corpus</p></li>
<li><p>The correlated topic model allows topics to be correlated: Closer approximation to true document structure</p></li>
</ul></li>
<li><p><strong>Dynamic Topic Model (DTM)</strong></p>
<ul>
<li><p>LDA assumes that topics are fixed across documents, DTM allows topical content to vary smoothly over time</p></li>
<li><p>The assumption that topics are fixed may not be sensible!</p></li>
</ul></li>
<li><p><strong>Structural Topic Model (STM)</strong></p>
<ul>
<li>Social scientists are typically interested in how topics vary with covariates. The structural topic model incorporates covariates into the LDA model</li>
</ul></li>
</ol>
</section>
</section>
<section id="structural-topic-model" class="level1">
<h1>Structural Topic Model</h1>
<section id="structural-topic-model-1" class="level2">
<h2 class="anchored" data-anchor-id="structural-topic-model-1">Structural Topic Model</h2>
<ul>
<li><p>Typically, when estimating topic models we are interested in how some covariate is associated with the prevalence of topic usage (Gender, date, political party, etc)</p></li>
<li><p>The Structural Topic Model (STM) allows for the inclusion of arbitrary covariates of interest into the generative model</p></li>
<li><p><strong>Topic prevalence</strong> is allowed to vary according to the covariates X</p>
<ul>
<li>Each document has its own prior distribution over topics, which is defined by its covariates, rather than sharing a global mean</li>
</ul></li>
<li><p><strong>Topical content</strong> can also vary according to the covariates Y</p>
<ul>
<li>Word use <em>within</em> a topic can differ for different groups of speakers/writers</li>
</ul></li>
</ul>
</section>
<section id="structural-topic-model-application" class="level2">
<h2 class="anchored" data-anchor-id="structural-topic-model-application">Structural Topic Model Application</h2>
<ul>
<li><p>In the legislative domain, we might be interested in the degree to which MPs from different parties represent distinct interests in their parliamentary questions</p></li>
<li><p>We can use the STM to analyse how topic prevalence varies by party</p></li>
</ul>
</section>
<section id="structural-topic-model-application-1" class="level2">
<h2 class="anchored" data-anchor-id="structural-topic-model-application-1">Structural Topic Model Application</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Paket 'stm' wurde unter R Version 4.3.3 erstellt</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>stm v1.3.7 successfully loaded. See ?stm for help. 
 Papers, resources, and other materials at structuraltopicmodel.com</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We work with the same dfm, convert to stm object</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>stm <span class="ot">&lt;-</span> dfm <span class="sc">%&gt;%</span> </span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">convert</span>(<span class="at">to =</span> <span class="st">"stm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dfm2stm(x, docvars, omit_empty = TRUE): Dropped 2,498 empty
document(s)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(stm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Length Class      Mode     
documents 2469   -none-     list     
vocab     3230   -none-     character
meta        12   data.frame list     </code></pre>
</div>
</div>
</section>
<section id="estimate-stm" class="level2">
<h2 class="anchored" data-anchor-id="estimate-stm">Estimate STM</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Estimate STM</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>stmOut <span class="ot">&lt;-</span> <span class="fu">stm</span>(</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">documents =</span> stm<span class="sc">$</span>documents,</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">vocab =</span> stm<span class="sc">$</span>vocab,</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> stm<span class="sc">$</span>meta,</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">init.type =</span> <span class="st">"Spectral"</span>,</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">prevalence =</span> <span class="sc">~</span>party,</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">K =</span> <span class="dv">15</span>,</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">seed =</span> <span class="dv">123</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(stmOut, <span class="at">file =</span> <span class="st">"stmOut.Rda"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="plot" class="level2">
<h2 class="anchored" data-anchor-id="plot">Plot</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"stmOut.Rda"</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(stmOut, <span class="at">type =</span> <span class="st">"summary"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="08-Comparisons_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="plot-1" class="level2">
<h2 class="anchored" data-anchor-id="plot-1">Plot</h2>
<ul>
<li><p>Highest Prob is the raw coefficients</p></li>
<li><p>Score is the term-score measure we defined before</p></li>
<li><p>FREX is a measure which combines word-topic frequency with word-topic exclusivity</p></li>
<li><p>Lift is a normalised version of the word-probabilities</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">labelTopics</span>(stmOut)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Topic 1 Top Words:
     Highest Prob: gern, europa, sich, eben, vorschlag, geb, position 
     FREX: position, verhandl, sich, vorschlag, gern, offent, anker-zentr 
     Lift: bildungspartnerschaft, qualifizier, bahnsteighoh, bundesstrass, ministererlaubnis, naturschutz, radverkehr 
     Score: gespannt, gern, bundesstrass, position, radweg, verhandl, fusion 
Topic 2 Top Words:
     Highest Prob: euro, million, unternehm, prozent, milliard, erreich, ziel 
     FREX: tonn, erneuerbar, milliard, million, euro, pro, energi 
     Lift: dumont, nev, e-autos, storung, szenario, tonn, windenergi 
     Score: euro, million, ferkel, erneuerbar, tonn, energi, milliard 
Topic 3 Top Words:
     Highest Prob: gross, seit, wann, kommun, lang, beispiel, bahn 
     FREX: kraftstoff, bahn, fahrzeug, verkehr, wasserstoff, kommun, bundesumweltministerium 
     Lift: ausgenomm, eingebaut, kriterium, moratorium, plattform, strommeng, asylbewerberleistungsgesetz 
     Score: planungssich, bahn, wasserstoff, kraftstoff, lenkungswirk, fahrzeug, asylbewerberleistungsgesetz 
Topic 4 Top Words:
     Highest Prob: studi, gegeb, unterschied, aufgrund, beispiel, ergebnis, fall 
     FREX: frau, studi, unterschied, gegeb, bundespolizei, arbeitsgrupp, auftrag 
     Lift: thesenpapi, geschlecht, pflegebedurft, pflegedien, professor, alleinerzieh, ambulant 
     Score: angeleg, studi, frau, alleinerzieh, pflegebedurft, geschlecht, arbeitsgrupp 
Topic 5 Top Words:
     Highest Prob: erkenntnis, neu, schul, darub, angebot, gab, natur 
     FREX: schul, angebot, erkenntnis, roll, digital, quell, novemb 
     Lift: einsatzbereitschaft, luftungsanlag, schulerinn, fertig, grenzkontroll, maskenpflicht, nordrhein-westfal 
     Score: nordrhein-westfal, schul, angebot, maskenpflicht, digital, vergabeverfahr, erkenntnis 
Topic 6 Top Words:
     Highest Prob: verfahr, zwei, ministerium, burg, bevolker, zweit, funf 
     FREX: verfahr, bmz, schiedsgericht, afrikan, lokal, entwurf, bevolker 
     Lift: bonpflicht, europarechtswidr, kfw, prami, radfahr, schiedsgericht, traurig 
     Score: traurig, verfahr, schiedsgericht, bmz, schulenberg, barrierefrei, entwurf 
Topic 7 Top Words:
     Highest Prob: hatt, kurz, zahl, aussag, warum, ziel, herrn 
     FREX: jugend, paris, umweltministerium, fair, eu-kommission, kommission, arzt 
     Lift: hypothet, arztinn, au-pair, eu-klimaziel, gott, treibhausgasemission, wilk 
     Score: gott, jugend, umweltministerium, klimaschutzabkomm, arzt, eu-kommission, kommission 
Topic 8 Top Words:
     Highest Prob: beantwort, zahl, gestellt, genannt, davon, fall, bitt 
     FREX: beantwort, gestellt, schriftlich, off, marz, anfrag, versuch 
     Lift: bestandteil, bundesverteidigungsministerium, maass, militarseelsorg, muslim, seelsorg, plenum 
     Score: bestandteil, rechnung, marz, bundeswehr, schriftlich, anfrag, beantwort 
Topic 9 Top Words:
     Highest Prob: moglich, landwirtschaft, wirklich, betrieb, hilf, imm, massnahm 
     FREX: landwirtschaft, landwirt, betrieb, gesichert, grundsteu, leist, hilf 
     Lift: ausub, shar, heckl, vorlag, kreuz, ungarn, wwf 
     Score: vorlag, landwirtschaft, grundsteu, landwirt, heckl, bundesrat, hilf 
Topic 10 Top Words:
     Highest Prob: deshalb, zulass, initiativ, wissenschaft, wirklich, eben, europa 
     FREX: taiwan, wald, glyphosat, regeln, zulass, franzos, china 
     Lift: abwag, adil, demirci, eingelad, glyphosat-zulass, nachgeh, weiterkomm 
     Score: nachgeh, taiwan, sicherheitsrat, who, glyphosat, beobachterstatus, zulass 
Topic 11 Top Words:
     Highest Prob: gas, uns, lass, eigent, europa, nord, zusammenarbeit 
     FREX: gas, nord, ukrain, stream, abhang, kohl, fossil 
     Lift: bundesschienenwegeausbaugesetz, flussiggas, geschaftsfuhr, szczepanski, infektion, operation, pipelin 
     Score: geschaftsfuhr, gas, stream, nord, fossil, ukrain, kohl 
Topic 12 Top Words:
     Highest Prob: mensch, muss, imm, natur, alt, prozent, gesetz 
     FREX: alt, altersarmut, grundsicher, mensch, arm, absatz, miet 
     Lift: eingezahlt, grundsicher, teilgenomm, deutschlandtakt, elektrifiziert, mindestlohn, rent 
     Score: teilgenomm, altersarmut, mensch, grundsicher, rentn, tafeln, alt 
Topic 13 Top Words:
     Highest Prob: teil, deshalb, staatssekretarin, einschatz, seh, sei, gern 
     FREX: brasili, anwes, atomkraftwerk, mess, nachweis, method, ausweichstreck 
     Lift: gemeinnutz, leopoldina, rechtsextremist, reprasentativ, rheintalbahn, umlagefah, amadeu-antonio-stift 
     Score: erzahl, ausweichstreck, extremismus, nationalversamml, amadeu-antonio-stift, atomkraftwerk, endlag 
Topic 14 Top Words:
     Highest Prob: staatsminist, staat, polit, syri, regier, turkei, seit 
     FREX: liby, turkisch, militar, syri, menschenrecht, turkei, saudi-arabi 
     Lift: bombardier, endverbleib, freilass, joint, patrouillenboot, regenwald, rustungsgut 
     Score: syri, defini, turkei, turkisch, staatsminist, waff, liby 
Topic 15 Top Words:
     Highest Prob: mensch, polizei, fluchtling, bereit, rahm, abschieb, umsetz 
     FREX: polizei, inseln, griechisch, fluchtling, abschieb, gefluchtet, rassismus 
     Lift: asylantrag, extremist, kabinettsausschuss, lesbos, polizei, inseln, kolumbi 
     Score: ruf, polizei, inseln, griechisch, fluchtling, rechtsextremismus, rassismus </code></pre>
</div>
</div>
</section>
<section id="plot-2" class="level2">
<h2 class="anchored" data-anchor-id="plot-2">Plot</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(stmOut, <span class="at">labeltype =</span> <span class="st">"frex"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="08-Comparisons_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="plot-3" class="level2">
<h2 class="anchored" data-anchor-id="plot-3">Plot</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cloud</span>(stmOut, <span class="at">topic =</span> <span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wordcloud::wordcloud(words = vocab, freq = vec, max.words =
max.words, : bekampf could not be fit on page. It will not be plotted.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wordcloud::wordcloud(words = vocab, freq = vec, max.words =
max.words, : asylverfahr could not be fit on page. It will not be plotted.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wordcloud::wordcloud(words = vocab, freq = vec, max.words =
max.words, : inseln could not be fit on page. It will not be plotted.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wordcloud::wordcloud(words = vocab, freq = vec, max.words =
max.words, : kabinettsausschuss could not be fit on page. It will not be
plotted.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wordcloud::wordcloud(words = vocab, freq = vec, max.words =
max.words, : abschieb could not be fit on page. It will not be plotted.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wordcloud::wordcloud(words = vocab, freq = vec, max.words =
max.words, : bildung could not be fit on page. It will not be plotted.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wordcloud::wordcloud(words = vocab, freq = vec, max.words =
max.words, : asylantrag could not be fit on page. It will not be plotted.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="08-Comparisons_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="plot-4" class="level2">
<h2 class="anchored" data-anchor-id="plot-4">Plot</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>topic_effects <span class="ot">&lt;-</span> <span class="fu">estimateEffect</span>(<span class="fu">c</span>(<span class="dv">15</span>) <span class="sc">~</span> party, stmOut, <span class="at">meta =</span> stm<span class="sc">$</span>meta)</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot.estimateEffect</span>(topic_effects,</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">covariate =</span> <span class="st">"party"</span>,</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">method =</span> <span class="st">"pointestimate"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="08-Comparisons_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="validating-topic-models" class="level1">
<h1>Validating Topic Models</h1>
<section id="validating-topic-models-1" class="level2">
<h2 class="anchored" data-anchor-id="validating-topic-models-1">Validating Topic Models</h2>
<ul>
<li><p>LDA, and topic models more generally, require the researcher to make several implementation decisions</p></li>
<li><p>In particular, we must select a value for K, the number of topics</p></li>
<li><p>How can we select between different values of K? How can we tell how well a given topic model is performing?</p></li>
</ul>
</section>
<section id="validating-topic-models-2" class="level2">
<h2 class="anchored" data-anchor-id="validating-topic-models-2">Validating Topic Models</h2>
<ul>
<li><p><strong>Predictive metric: Held-out likelihood</strong></p>
<ul>
<li><p>Ask which words the model believes will be in a given document and comparing this to the document’s actual word composition (i.e.&nbsp;calculate the held-out likelihood)</p></li>
<li><p>E.g. Splitting texts in half, train a topic model on one half, calculate the held-out likelihood for the other half</p></li>
</ul></li>
<li><p><strong>Interpretational metrics</strong></p>
<ul>
<li><p><em>Semantic coherence</em></p>
<ul>
<li>Do the most common words from a topic also co-occur together frequently in the same documents?</li>
</ul></li>
<li><p><em>Exclusivity</em></p>
<ul>
<li>Do words with high probability in one topic have low probabilities in others?</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="quantitative-evaluation-of-stm" class="level2">
<h2 class="anchored" data-anchor-id="quantitative-evaluation-of-stm">Quantitative Evaluation of STM</h2>
<p>Using the <code>searchK</code> function in the <code>stm</code> package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>k_results <span class="ot">&lt;-</span> <span class="fu">searchK</span>(<span class="at">documents =</span> stm<span class="sc">$</span>documents, </span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">vocab =</span> stm<span class="sc">$</span>vocab, </span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data =</span> stm<span class="sc">$</span>meta, </span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">max.em.its =</span> <span class="dv">25</span>, <span class="co"># maximum number of EM iterations</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">K =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>),  <span class="co"># Try different K values</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">prevalence =</span> <span class="sc">~</span>party, </span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>                     <span class="at">seed =</span> <span class="dv">123</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(k_results, <span class="at">file =</span> <span class="st">"k_results.Rda"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="quantitative-evaluation-of-stm-1" class="level2">
<h2 class="anchored" data-anchor-id="quantitative-evaluation-of-stm-1">Quantitative Evaluation of STM</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"k_results.Rda"</span>)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(k_results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="08-Comparisons_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="semantic-validity-chang-et-al.-2009" class="level2">
<h2 class="anchored" data-anchor-id="semantic-validity-chang-et-al.-2009">Semantic validity (<a href="http://users.umiacs.umd.edu/~jbg/docs/nips2009-rtl.pdf">Chang et al.&nbsp;2009</a>)</h2>
<p><em>Word intrusion:</em> Test if topics have semantic coherence by asking humans identify a spurious word inserted into a topic.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: center;"><strong>Topic</strong></th>
<th style="text-align: center;">w1</th>
<th style="text-align: center;">w2</th>
<th style="text-align: center;">w3</th>
<th style="text-align: center;">w4</th>
<th style="text-align: center;">w5</th>
<th style="text-align: center;">w6</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;">bank</td>
<td style="text-align: center;">financ</td>
<td style="text-align: center;">terror</td>
<td style="text-align: center;">england</td>
<td style="text-align: center;">fiscal</td>
<td style="text-align: center;">market</td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td style="text-align: center;">europe</td>
<td style="text-align: center;">union</td>
<td style="text-align: center;">eu</td>
<td style="text-align: center;">referendum</td>
<td style="text-align: center;">vote</td>
<td style="text-align: center;">school</td>
</tr>
<tr class="odd">
<td style="text-align: center;">3</td>
<td style="text-align: center;">war</td>
<td style="text-align: center;">deliv</td>
<td style="text-align: center;">nhs</td>
<td style="text-align: center;">prison</td>
<td style="text-align: center;">mr</td>
<td style="text-align: center;">right</td>
</tr>
</tbody>
</table>
<p><strong>Assumption:</strong> When humans find it easy to locate the “intruding” <em>word</em>, the topics are more coherent.</p>
</section>
<section id="validating-topic-models-substantive-approaches" class="level2">
<h2 class="anchored" data-anchor-id="validating-topic-models-substantive-approaches">Validating Topic Models – Substantive approaches</h2>
<ul>
<li><p><em>Semantic validity</em></p>
<ul>
<li><p>Does a topic contain coherent groups of words?</p></li>
<li><p>Does a topic identify a coherent groups of texts that are internally homogenous but distinctive from other topics?</p></li>
</ul></li>
<li><p><em>Predictive validity</em></p>
<ul>
<li>How well does variation in topic usage correspond to known events?</li>
</ul></li>
</ul>
<p><strong>Implication</strong>: All these approaches require careful human reading of texts and topics, and comparison with sensible metadata.</p>
</section>
</section>
<section id="coding" class="level1">
<h1>Coding</h1>
<section id="coding-1" class="level2">
<h2 class="anchored" data-anchor-id="coding-1">Coding</h2>
<ul>
<li><p>Create your own data based on the parliamentary speeches dataset on ILIAS or other text data. Be creative!</p></li>
<li><p>Try out to run a LDA and a STM. Inspect the models.</p></li>
<li><p>BONUS: Try to “replicate” <a href="https://www.cambridge.org/core/journals/government-and-opposition/article/simply-speaking-language-complexity-among-nonpopulist-actors-in-parliamentary-debates/30B241C0182677F07A6ABD31BC519831">this paper</a>.</p>
<ul>
<li><p>Use LDA (similar topics?) instead of seeded LDA. But you can try both of course!</p></li>
<li><p>The replication files for the analysis are available on OSF Registries at&nbsp;<a href="https://doi.org/10.17605/OSF.IO/93DQY" class="uri">https://doi.org/10.17605/OSF.IO/93DQY</a>.</p></li>
</ul></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Text as Data: Introduction to Computational Text Analysis in R | Spring 2025 | University of Mannheim</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>This page is built with <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>




</body></html>